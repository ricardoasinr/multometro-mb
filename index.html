<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mult√≥metro Challenge - Calculadora de Multas AEMP</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Script para asegurar carga de jsPDF -->
    <script>
        // Precargar jsPDF para asegurar disponibilidad
        window.addEventListener('DOMContentLoaded', function() {
            // Intentar cargar jsPDF desde m√∫ltiples fuentes
            const cdnUrls = [
                'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js',
                'https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js',
                'https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js'
            ];
            
            function loadScript(url) {
                return new Promise((resolve, reject) => {
                    const script = document.createElement('script');
                    script.src = url;
                    script.onload = resolve;
                    script.onerror = reject;
                    document.head.appendChild(script);
                });
            }
            
            // Cargar el primero, si falla intentar con el siguiente
            async function loadJsPDF() {
                console.log('Precargando jsPDF...');
                
                for (const url of cdnUrls) {
                    try {
                        await loadScript(url);
                        console.log('jsPDF cargado exitosamente desde:', url);
                        // Verificar si realmente se carg√≥
                        if (window.jsPDF || window.jspdf) {
                            console.log('jsPDF disponible globalmente');
                            return true;
                        }
                    } catch (e) {
                        console.warn('Error cargando jsPDF desde:', url);
                    }
                }
                
                console.error('No se pudo cargar jsPDF desde ninguna fuente');
                return false;
            }
            
            // Intentar cargar jsPDF
            loadJsPDF();
        });
    </script>
</head>
<body>
    <!-- P√°gina de Bienvenida -->
    <div id="welcome-page" class="page active">
        <div class="container">
            <div class="welcome-content">
                <div class="welcome-icon">
                    <i class="fas fa-calculator"></i>
                </div>
                <h1>üéØ Bienvenido a Mult√≥metro Challenge</h1>
                <p class="welcome-subtitle">
                    üìä Herramienta de c√°lculo estimado de multas basado en el Reglamento de Sanciones e
                    Infracciones Comerciales y Contables (Resoluci√≥n RA/AEMP/N¬∫009/2021)
                </p>
                
                <div class="feature-section">
                    <h3>üöÄ Esta herramienta te ayuda a:</h3>
                    <ul class="feature-list">
                        <li>üí∞ Estimar cu√°nto podr√≠a costarte una infracci√≥n seg√∫n la Resoluci√≥n RA/AEMP/N¬∫009/2021.</li>
                        <li>üìö Entender mejor las reglas de la Autoridad de Fiscalizaci√≥n de Empresas (AEMP).</li>
                        <li>üõ°Ô∏è Prevenir riesgos antes de que se conviertan en multas.</li>
                    </ul>
                </div>

                <div class="how-it-works">
                    <h3>‚ö° Funciona as√≠ de f√°cil:</h3>
                    <ol class="steps-list">
                        <li>1Ô∏è‚É£ Elige el tipo de infracci√≥n.</li>
                        <li>2Ô∏è‚É£ Ingresa los datos que te pide el sistema (tipo de sociedad, base de c√°lculo).</li>
                        <li>3Ô∏è‚É£ Descubre cu√°l ser√≠a la sanci√≥n aproximada seg√∫n la AEMP.</li>
                    </ol>
                </div>

                <div class="important-notice">
                    <div class="notice-header">

                        <strong>‚ö†Ô∏è¬°Importante: Esto es solo una gu√≠a</strong>
                    </div>
                    <ul class="notice-list">
                        <li>üìã Los resultados son estimados en funci√≥n a su evaluaci√≥n de infracciones.</li>
                        <li>üìÑ No es un documento oficial ni reemplaza lo que establezca el ente regulador.</li>
                        <li>üë®‚Äçüíº Para temas serios, siempre consulta a un experto o a la autoridad.</li>
                    </ul>
                </div>

                <div class="remember-section">
                    <h3>üí° Recuerda:</h3>
                    <ul class="remember-list">
                        <li>‚ö†Ô∏è M√°s vale prevenir que lamentar.</li>
                        <li>ü§ù Puedes contactarnos para un asesoramiento integral:</li>
                    </ul>
                
                </div>

                <button class="btn btn-primary" onclick="nextPage()">
                    üéØ Comenzar
                    <i class="fas fa-arrow-right"></i>
                </button>

                <p class="final-message">üéâ ¬°Usa esta herramienta para aprender y evitar sorpresas!</p>
            </div>
        </div>
    </div>



    <!-- P√°gina del Formulario -->
    <div id="form-page" class="page">
        <div class="container">
            <div class="form-content">
                <div class="back-button">
                    <button class="btn btn-secondary" onclick="prevPage()">
                        <i class="fas fa-arrow-left"></i>
                        Atr√°s
                    </button>
                </div>

                <div class="form-header">
                    <div class="form-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <h2>Formulario de Registro</h2>
                    <p>Por favor, completa la siguiente informaci√≥n</p>
                </div>

                <form id="registration-form" class="registration-form">
                    <div class="form-group">
                        <label for="fullName">
                            <i class="fas fa-user"></i>
                            Nombre y Apellidos *
                        </label>
                        <input 
                            type="text" 
                            id="fullName" 
                            name="fullName" 
                            required 
                            placeholder="Ej: Juan P√©rez Garc√≠a"
                        >
                        <span class="error-message" id="fullName-error"></span>
                    </div>

                    <div class="form-group">
                        <label for="company">
                            <i class="fas fa-building"></i>
                            Empresa *
                        </label>
                        <input 
                            type="text" 
                            id="company" 
                            name="company" 
                            required 
                            placeholder="Ej: Tecnol√≥gica S.A."
                        >
                        <span class="error-message" id="company-error"></span>
                    </div>

                    <div class="form-group">
                        <label for="position">
                            <i class="fas fa-briefcase"></i>
                            Cargo *
                        </label>
                        <input 
                            type="text" 
                            id="position" 
                            name="position" 
                            required 
                            placeholder="Ej: Gerente de Ventas"
                        >
                        <span class="error-message" id="position-error"></span>
                    </div>

                    <div class="form-group">
                        <label for="email">
                            <i class="fas fa-envelope"></i>
                            Email *
                        </label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email" 
                            required 
                            placeholder="Ej: juan.perez@empresa.com"
                        >
                        <span class="error-message" id="email-error"></span>
                    </div>

                    <div class="form-group">
                        <label for="phone">
                            <i class="fas fa-phone"></i>
                            Tel√©fono *
                        </label>
                        <input 
                            type="tel" 
                            id="phone" 
                            name="phone" 
                            required 
                            placeholder="Ej: +34 600 123 456"
                        >
                        <span class="error-message" id="phone-error"></span>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-submit">
                            <i class="fas fa-paper-plane"></i>
                            Continuar
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- P√°gina de Configuraci√≥n de Empresa -->
    <div id="company-config-page" class="page">
        <div class="container">
            <div class="company-config-content">
                <div class="back-button">
                    <button class="btn btn-secondary" onclick="prevPage()">
                        <i class="fas fa-arrow-left"></i>
                        Atr√°s
                    </button>
                </div>

                <div class="config-header">
                    <div class="config-icon">
                        <i class="fas fa-building"></i>
                    </div>
                    <h2>Configuraci√≥n de Empresa</h2>
                    <p>Configura los par√°metros de tu empresa para una evaluaci√≥n precisa</p>
                </div>

                <div class="company-configuration">
                    <div class="config-group">
                        <label for="company-type">
                            <i class="fas fa-building"></i>
                            Tipo de Sociedad
                        </label>
                        <div class="select-wrapper">
                            <select id="company-type" name="company-type" required>
                                <option value="">Selecciona el tipo de sociedad</option>
                                <option value="empresa-unipersonal">Empresa Unipersonal</option>
                                <option value="srl">Sociedad de Responsabilidad Limitada</option>
                                <option value="colectiva-comandita">Sociedad Colectiva y Comandita Simple</option>
                                <option value="anonima-mixta">Sociedad An√≥nima, Comandita por Acciones, Sociedad An√≥nima Mixta y Sociedades constituidas en el Extranjero</option>
                            </select>
                            <i class="fas fa-chevron-down select-arrow"></i>
                        </div>
                    </div>

                    <div class="config-group">
                        <label for="calculation-base">
                            <i class="fas fa-calculator"></i>
                            Base de C√°lculo
                        </label>
                        <div class="select-wrapper">
                            <select id="calculation-base" name="calculation-base" required>
                                <option value="">Selecciona la base de c√°lculo</option>
                                <option value="utilidad-bruta">Utilidad Bruta</option>
                                <option value="capital">Capital</option>
                            </select>
                            <i class="fas fa-chevron-down select-arrow"></i>
                        </div>
                    </div>

                    <div class="config-group">
                        <label for="base-amount">
                            <i class="fas fa-money-bill-wave"></i>
                            MONTO BASE DE C√ÅLCULO (Bs.)
                        </label>
                        <div class="input-wrapper">
                            <input 
                                type="number" 
                                id="base-amount" 
                                name="base-amount" 
                                required 
                                placeholder="Ej: 50000"
                                min="0"
                                step="0.01"
                            >
                            <i class="fas fa-boliviano input-icon"></i>
                        </div>
                    </div>

                    <div class="config-actions">
                        <button id="continue-btn" class="btn btn-primary btn-submit" onclick="validateAndContinue()" disabled>
                            <i class="fas fa-arrow-right"></i>
                            Continuar al Mult√≥metro
                        </button>
                        <p class="requirement-text">Completa todos los campos obligatorios (*) para continuar</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- P√°gina de Progreso -->
    <div id="progress-page" class="page">
        <div class="container">
            <div class="progress-content">
                <div class="processing-icon">
                    <i class="fas fa-cog fa-spin"></i>
                </div>
                <h2>Configurar Evaluaci√≥n</h2>
                <p class="processing-message">
                    Selecciona el porcentaje de preguntas para tu evaluaci√≥n
                </p>

                <!-- Selector Principal de Porcentaje -->
                <div class="percentage-selector">
                    <h3>Selecciona el porcentaje de evaluaci√≥n</h3>
                    <div class="percentage-input-group">
                        <label for="target-percentage">Porcentaje objetivo:</label>
                        <div class="percentage-input-container">
                            <input type="range" id="target-percentage" min="1" max="100" value="75" class="percentage-slider">
                            <div class="percentage-value">
                                <span id="target-value">75</span>%
                            </div>
                        </div>
                    </div>
                    
                    <div class="quick-percentages">
                        <span>Valores r√°pidos:</span>
                        <button class="btn btn-percentage" onclick="setTargetPercentage(25)">25%</button>
                        <button class="btn btn-percentage" onclick="setTargetPercentage(50)">50%</button>
                        <button class="btn btn-percentage" onclick="setTargetPercentage(75)">75%</button>
                        <button class="btn btn-percentage" onclick="setTargetPercentage(100)">100%</button>
                    </div>
                    
                    <button class="btn btn-primary btn-start" onclick="startProgressAnimation()">
                        <i class="fas fa-play"></i>
                        Iniciar Cuestionario
                    </button>
                </div>

                <!-- Componente de Progreso Personalizable -->
                
            </div>
        </div>
    </div>

    <!-- P√°gina de Preguntas -->
    <div id="questions-page" class="page">
        <div class="container">
            <div class="questions-content">
                <div class="questions-header">
                    <div class="questions-icon">
                        <i class="fas fa-clipboard-question"></i>
                    </div>
                    <h2>Mult√≥metro</h2>
                    <div class="question-counter">
                        Pregunta <span id="question-number">1</span> de <span id="question-total">10</span>
                    </div>
                </div>

                <div class="question-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="questions-progress-fill"></div>
                    </div>
                </div>

                <div class="question-card">
                    <div class="question-category">
                        <span class="category-badge" id="question-category">Comercial</span>
                    </div>
                    <div class="question-text" id="current-question">
                        ¬øSu empresa est√° actualmente matriculada en el Registro de Comercio?
                    </div>
                    
                    <div class="answer-options">
                        <label class="answer-option answer-yes">
                            <input type="radio" name="answer" value="yes" onchange="answerQuestion('yes')">
                            <div class="option-content">
                                <i class="fas fa-check-circle"></i>
                                <span>S√≠</span>
                            </div>
                        </label>
                        
                        <label class="answer-option answer-no">
                            <input type="radio" name="answer" value="no" onchange="answerQuestion('no')">
                            <div class="option-content">
                                <i class="fas fa-times-circle"></i>
                                <span>No</span>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- P√°gina de Confirmaci√≥n -->
    <div id="success-page" class="page">
        <div class="container">
            <div class="success-content">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2>¬°Cuestionario Completado!</h2>
                <p class="success-message">
                    Gracias por completar el cuestionario. Has evaluado tu situaci√≥n con el Mult√≥metro.
                </p>
                <p class="success-note">
                    Los resultados mostrados son una estimaci√≥n basada en tus respuestas.
                </p>
                <div class="success-actions">
                    <button class="btn btn-secondary" onclick="generarReportePDF()">
                        <i class="fas fa-file-pdf"></i>
                        Enviar Reporte PDF
                    </button>
                    </button>
                    <button class="btn btn-primary" onclick="restartForm()">
                        <i class="fas fa-redo"></i>
                        Realizar nueva evaluaci√≥n
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Progress Indicator -->
    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div class="progress-steps">
            <div class="step active" id="step-1">1</div>
            <div class="step" id="step-2">2</div>
            <div class="step" id="step-3">3</div>
            <div class="step" id="step-4">4</div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
</body>
</html> 